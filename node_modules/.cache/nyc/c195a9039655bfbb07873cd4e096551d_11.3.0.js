'use strict';var cov_f5a25dhie=function(){var path='/usr/src/util/functions.js',hash='f35ad158718d8a0e6793102b8d3d7bb22ed5a9b9',global=new Function('return this')(),gcv='__coverage__',coverageData={path:'/usr/src/util/functions.js',statementMap:{'0':{start:{line:3,column:20},end:{line:3,column:39}},'1':{start:{line:4,column:15},end:{line:4,column:32}},'2':{start:{line:7,column:16},end:{line:21,column:4}},'3':{start:{line:8,column:19},end:{line:8,column:21}},'4':{start:{line:10,column:4},end:{line:13,column:5}},'5':{start:{line:11,column:21},end:{line:11,column:57}},'6':{start:{line:12,column:6},end:{line:12,column:43}},'7':{start:{line:12,column:20},end:{line:12,column:43}},'8':{start:{line:14,column:4},end:{line:20,column:8}},'9':{start:{line:16,column:8},end:{line:16,column:26}},'10':{start:{line:17,column:8},end:{line:17,column:23}},'11':{start:{line:19,column:8},end:{line:19,column:53}},'12':{start:{line:22,column:2},end:{line:22,column:16}},'13':{start:{line:26,column:2},end:{line:26,column:25}},'14':{start:{line:27,column:2},end:{line:27,column:89}},'15':{start:{line:28,column:2},end:{line:28,column:19}},'16':{start:{line:32,column:16},end:{line:45,column:4}},'17':{start:{line:33,column:4},end:{line:44,column:5}},'18':{start:{line:34,column:6},end:{line:41,column:10}},'19':{start:{line:36,column:25},end:{line:36,column:34}},'20':{start:{line:37,column:10},end:{line:40,column:14}},'21':{start:{line:39,column:14},end:{line:39,column:23}},'22':{start:{line:43,column:6},end:{line:43,column:15}},'23':{start:{line:46,column:2},end:{line:46,column:16}},'24':{start:{line:50,column:16},end:{line:65,column:4}},'25':{start:{line:51,column:19},end:{line:51,column:21}},'26':{start:{line:52,column:4},end:{line:61,column:5}},'27':{start:{line:53,column:20},end:{line:59,column:8}},'28':{start:{line:54,column:22},end:{line:54,column:30}},'29':{start:{line:55,column:8},end:{line:58,column:12}},'30':{start:{line:57,column:12},end:{line:57,column:21}},'31':{start:{line:60,column:6},end:{line:60,column:28}},'32':{start:{line:62,column:4},end:{line:64,column:6}},'33':{start:{line:63,column:6},end:{line:63,column:15}},'34':{start:{line:66,column:2},end:{line:66,column:16}},'35':{start:{line:70,column:2},end:{line:70,column:63}},'36':{start:{line:74,column:23},end:{line:82,column:1}},'37':{start:{line:75,column:15},end:{line:75,column:17}},'38':{start:{line:76,column:2},end:{line:80,column:4}},'39':{start:{line:77,column:4},end:{line:79,column:5}},'40':{start:{line:78,column:6},end:{line:78,column:24}},'41':{start:{line:81,column:2},end:{line:81,column:15}},'42':{start:{line:84,column:28},end:{line:88,column:1}},'43':{start:{line:85,column:15},end:{line:86,column:52}},'44':{start:{line:86,column:20},end:{line:86,column:51}},'45':{start:{line:87,column:2},end:{line:87,column:15}},'46':{start:{line:90,column:0},end:{line:90,column:33}},'47':{start:{line:91,column:0},end:{line:91,column:43}},'48':{start:{line:92,column:0},end:{line:92,column:55}},'49':{start:{line:93,column:0},end:{line:93,column:33}},'50':{start:{line:94,column:0},end:{line:94,column:39}},'51':{start:{line:95,column:0},end:{line:95,column:49}}},fnMap:{'0':{name:'syncForEach',decl:{start:{line:6,column:9},end:{line:6,column:20}},loc:{start:{line:6,column:38},end:{line:23,column:1}},line:6},'1':{name:'(anonymous_1)',decl:{start:{line:7,column:28},end:{line:7,column:29}},loc:{start:{line:7,column:49},end:{line:21,column:3}},line:7},'2':{name:'(anonymous_2)',decl:{start:{line:15,column:12},end:{line:15,column:13}},loc:{start:{line:15,column:27},end:{line:18,column:7}},line:15},'3':{name:'(anonymous_3)',decl:{start:{line:18,column:15},end:{line:18,column:16}},loc:{start:{line:18,column:22},end:{line:20,column:7}},line:18},'4':{name:'asignarHash',decl:{start:{line:25,column:9},end:{line:25,column:20}},loc:{start:{line:25,column:38},end:{line:29,column:1}},line:25},'5':{name:'doStep',decl:{start:{line:31,column:9},end:{line:31,column:15}},loc:{start:{line:31,column:42},end:{line:47,column:1}},line:31},'6':{name:'(anonymous_6)',decl:{start:{line:32,column:28},end:{line:32,column:29}},loc:{start:{line:32,column:39},end:{line:45,column:3}},line:32},'7':{name:'(anonymous_7)',decl:{start:{line:35,column:14},end:{line:35,column:15}},loc:{start:{line:35,column:18},end:{line:41,column:9}},line:35},'8':{name:'(anonymous_8)',decl:{start:{line:38,column:18},end:{line:38,column:19}},loc:{start:{line:38,column:22},end:{line:40,column:13}},line:38},'9':{name:'awaitSyncForEach',decl:{start:{line:49,column:9},end:{line:49,column:25}},loc:{start:{line:49,column:43},end:{line:67,column:1}},line:49},'10':{name:'(anonymous_10)',decl:{start:{line:50,column:28},end:{line:50,column:29}},loc:{start:{line:50,column:39},end:{line:65,column:3}},line:50},'11':{name:'(anonymous_11)',decl:{start:{line:53,column:32},end:{line:53,column:33}},loc:{start:{line:53,column:43},end:{line:59,column:7}},line:53},'12':{name:'(anonymous_12)',decl:{start:{line:56,column:16},end:{line:56,column:17}},loc:{start:{line:56,column:20},end:{line:58,column:11}},line:56},'13':{name:'(anonymous_13)',decl:{start:{line:62,column:31},end:{line:62,column:32}},loc:{start:{line:62,column:35},end:{line:64,column:5}},line:62},'14':{name:'secureAwaitSyncForEach',decl:{start:{line:69,column:9},end:{line:69,column:31}},loc:{start:{line:69,column:43},end:{line:71,column:1}},line:69},'15':{name:'(anonymous_15)',decl:{start:{line:74,column:23},end:{line:74,column:24}},loc:{start:{line:74,column:52},end:{line:82,column:1}},line:74},'16':{name:'(anonymous_16)',decl:{start:{line:76,column:26},end:{line:76,column:27}},loc:{start:{line:76,column:35},end:{line:80,column:3}},line:76},'17':{name:'(anonymous_17)',decl:{start:{line:84,column:28},end:{line:84,column:29}},loc:{start:{line:84,column:40},end:{line:88,column:1}},line:84},'18':{name:'(anonymous_18)',decl:{start:{line:86,column:12},end:{line:86,column:13}},loc:{start:{line:86,column:20},end:{line:86,column:51}},line:86}},branchMap:{'0':{loc:{start:{line:12,column:6},end:{line:12,column:43}},type:'if',locations:[{start:{line:12,column:6},end:{line:12,column:43}},{start:{line:12,column:6},end:{line:12,column:43}}],line:12},'1':{loc:{start:{line:26,column:10},end:{line:26,column:25}},type:'binary-expr',locations:[{start:{line:26,column:10},end:{line:26,column:15}},{start:{line:26,column:19},end:{line:26,column:25}}],line:26},'2':{loc:{start:{line:33,column:4},end:{line:44,column:5}},type:'if',locations:[{start:{line:33,column:4},end:{line:44,column:5}},{start:{line:33,column:4},end:{line:44,column:5}}],line:33},'3':{loc:{start:{line:33,column:7},end:{line:33,column:46}},type:'binary-expr',locations:[{start:{line:33,column:7},end:{line:33,column:27}},{start:{line:33,column:31},end:{line:33,column:46}}],line:33},'4':{loc:{start:{line:77,column:4},end:{line:79,column:5}},type:'if',locations:[{start:{line:77,column:4},end:{line:79,column:5}},{start:{line:77,column:4},end:{line:79,column:5}}],line:77},'5':{loc:{start:{line:86,column:20},end:{line:86,column:51}},type:'binary-expr',locations:[{start:{line:86,column:20},end:{line:86,column:33}},{start:{line:86,column:38},end:{line:86,column:51}}],line:86}},s:{'0':0,'1':0,'2':0,'3':0,'4':0,'5':0,'6':0,'7':0,'8':0,'9':0,'10':0,'11':0,'12':0,'13':0,'14':0,'15':0,'16':0,'17':0,'18':0,'19':0,'20':0,'21':0,'22':0,'23':0,'24':0,'25':0,'26':0,'27':0,'28':0,'29':0,'30':0,'31':0,'32':0,'33':0,'34':0,'35':0,'36':0,'37':0,'38':0,'39':0,'40':0,'41':0,'42':0,'43':0,'44':0,'45':0,'46':0,'47':0,'48':0,'49':0,'50':0,'51':0},f:{'0':0,'1':0,'2':0,'3':0,'4':0,'5':0,'6':0,'7':0,'8':0,'9':0,'10':0,'11':0,'12':0,'13':0,'14':0,'15':0,'16':0,'17':0,'18':0},b:{'0':[0,0],'1':[0,0],'2':[0,0],'3':[0,0],'4':[0,0],'5':[0,0]},_coverageSchema:'332fd63041d2c1bcb487cc26dd0d5f7d97098a6c'},coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}coverageData.hash=hash;return coverage[path]=coverageData;}();const errorGetter=(cov_f5a25dhie.s[0]++,require('./errors'));const bcrypt=(cov_f5a25dhie.s[1]++,require('bcrypt'));function syncForEach(array,callback){cov_f5a25dhie.f[0]++;let promise=(cov_f5a25dhie.s[2]++,new Promise((resolve,reject)=>{cov_f5a25dhie.f[1]++;let promises=(cov_f5a25dhie.s[3]++,[]);let values;cov_f5a25dhie.s[4]++;for(let index=0;index<array.length;index++){let response=(cov_f5a25dhie.s[5]++,callback(array[index],index,array));cov_f5a25dhie.s[6]++;if(response){cov_f5a25dhie.b[0][0]++;cov_f5a25dhie.s[7]++;promises.push(response);}else{cov_f5a25dhie.b[0][1]++;}}cov_f5a25dhie.s[8]++;Promise.all(promises).then(responses=>{cov_f5a25dhie.f[2]++;cov_f5a25dhie.s[9]++;values=responses;cov_f5a25dhie.s[10]++;resolve(values);}).catch(e=>{cov_f5a25dhie.f[3]++;cov_f5a25dhie.s[11]++;reject(errorGetter.getServiceError(e.errors));});}));cov_f5a25dhie.s[12]++;return promise;}function asignarHash(parametros,campo){cov_f5a25dhie.f[4]++;cov_f5a25dhie.s[13]++;campo=(cov_f5a25dhie.b[1][0]++,campo)||(cov_f5a25dhie.b[1][1]++,'_rev');cov_f5a25dhie.s[14]++;parametros[campo]=bcrypt.hashSync(JSON.stringify(parametros),bcrypt.genSaltSync(10));cov_f5a25dhie.s[15]++;return parametros;}function doStep(array,fn,index,maxStep){cov_f5a25dhie.f[5]++;let promise=(cov_f5a25dhie.s[16]++,new Promise(resolve=>{cov_f5a25dhie.f[6]++;cov_f5a25dhie.s[17]++;if((cov_f5a25dhie.b[3][0]++,index<array.length)&&(cov_f5a25dhie.b[3][1]++,index<maxStep)){cov_f5a25dhie.b[2][0]++;cov_f5a25dhie.s[18]++;fn(array[index]).then(()=>{cov_f5a25dhie.f[7]++;let newIndex=(cov_f5a25dhie.s[19]++,index+1);cov_f5a25dhie.s[20]++;doStep(array,fn,newIndex,maxStep).then(()=>{cov_f5a25dhie.f[8]++;cov_f5a25dhie.s[21]++;resolve();});});}else{cov_f5a25dhie.b[2][1]++;cov_f5a25dhie.s[22]++;resolve();}}));cov_f5a25dhie.s[23]++;return promise;}function awaitSyncForEach(array,step,fn){cov_f5a25dhie.f[9]++;let promise=(cov_f5a25dhie.s[24]++,new Promise(resolve=>{cov_f5a25dhie.f[10]++;let promises=(cov_f5a25dhie.s[25]++,[]);cov_f5a25dhie.s[26]++;for(let i=0;i<array.length;i+=step){let promise=(cov_f5a25dhie.s[27]++,new Promise(resolve=>{cov_f5a25dhie.f[11]++;let maxStep=(cov_f5a25dhie.s[28]++,i+step);cov_f5a25dhie.s[29]++;doStep(array,fn,i,maxStep).then(()=>{cov_f5a25dhie.f[12]++;cov_f5a25dhie.s[30]++;resolve();});}));cov_f5a25dhie.s[31]++;promises.push(promise);}cov_f5a25dhie.s[32]++;Promise.all(promises).then(()=>{cov_f5a25dhie.f[13]++;cov_f5a25dhie.s[33]++;resolve();});}));cov_f5a25dhie.s[34]++;return promise;}function secureAwaitSyncForEach(array,fn){cov_f5a25dhie.f[14]++;cov_f5a25dhie.s[35]++;return awaitSyncForEach(array,Math.ceil(array.length/5),fn);}cov_f5a25dhie.s[36]++;const validateParams=(params,necessaryParams)=>{cov_f5a25dhie.f[15]++;let errors=(cov_f5a25dhie.s[37]++,[]);cov_f5a25dhie.s[38]++;necessaryParams.forEach(param=>{cov_f5a25dhie.f[16]++;cov_f5a25dhie.s[39]++;if(params[param]===undefined){cov_f5a25dhie.b[4][0]++;cov_f5a25dhie.s[40]++;errors.push(param);}else{cov_f5a25dhie.b[4][1]++;}});cov_f5a25dhie.s[41]++;return errors;};cov_f5a25dhie.s[42]++;const getFieldsFromParams=params=>{cov_f5a25dhie.f[17]++;let fields=(cov_f5a25dhie.s[43]++,Object.keys(params).filter(item=>{cov_f5a25dhie.f[18]++;cov_f5a25dhie.s[44]++;return(cov_f5a25dhie.b[5][0]++,item!=='pk')&&(cov_f5a25dhie.b[5][1]++,item!=='id');}));cov_f5a25dhie.s[45]++;return fields;};cov_f5a25dhie.s[46]++;exports.syncForEach=syncForEach;cov_f5a25dhie.s[47]++;exports.awaitSyncForEach=awaitSyncForEach;cov_f5a25dhie.s[48]++;exports.secureAwaitSyncForEach=secureAwaitSyncForEach;cov_f5a25dhie.s[49]++;exports.asignarHash=asignarHash;cov_f5a25dhie.s[50]++;exports.validateParams=validateParams;cov_f5a25dhie.s[51]++;exports.getFieldsFromParams=getFieldsFromParams;